(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.hooks,r=window.wp.compose,n=window.wp.element,a=window.wp.blockEditor,i=window.wp.components,o=window.wp.i18n,l=window.wp.apiFetch;var s=t.n(l);const d=window.ReactJSXRuntime,c=(0,r.createHigherOrderComponent)(t=>function(e){const[r,l]=(0,n.useState)(!1);if("core/image"!==e.name)return(0,d.jsx)(t,{...e});const{attributes:c,setAttributes:w}=e,{id:x,url:p}=c;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(t,{...e}),(0,d.jsx)(a.InspectorControls,{children:(0,d.jsx)(i.PanelBody,{title:(0,o.__)("AI Alt Text","ai-alt-text"),initialOpen:!0,children:(0,d.jsx)(i.Button,{variant:"secondary",onClick:async()=>{if(p||x){l(!0);try{const t=await s()({path:"/ai-alt-text/v1/generate",method:"POST",data:{attachment_id:x||null,image_url:x?null:p,overwrite:!0}});if(!t.success||!t.alt_text)throw new Error(t.message||(0,o.__)("Failed to generate","ai-alt-text"));w({alt:t.alt_text})}catch(t){console.error("AI Alt Text Error:",t),alert((0,o.__)("Error","ai-alt-text")+": "+t.message)}finally{l(!1)}}},disabled:r||!p&&!x,style:{width:"100%",justifyContent:"center"},children:r?(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(i.Spinner,{style:{marginRight:"8px"}}),(0,o.__)("Generating...","ai-alt-text")]}):(0,o.__)("Generate Alt Text with AI","ai-alt-text")})})})]})},"withAIAltTextSidebar");(0,e.addFilter)("editor.BlockEdit","ai-alt-text/image-sidebar",c,20)})();